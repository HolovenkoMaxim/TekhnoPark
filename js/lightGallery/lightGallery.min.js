!function(e){"use strict";e.fn.lightGallery=function(t){var i,a,l,s,n,o,d,r,c,u,h=e(this),m=this,f=null,v=0,p=!1,b=!1,g=void 0!==document.createTouch||"ontouchstart"in window||"onmsgesturechange"in window||navigator.msMaxTouchPoints,C=!1,y=!1,w=!1,T=e.extend(!0,{},{mode:"slide",useCSS:!0,cssEasing:"ease",easing:"linear",speed:600,addClass:"",closable:!0,loop:!1,auto:!1,pause:4e3,escKey:!0,controls:!0,hideControlOnEnd:!1,preload:1,showAfterLoad:!0,selector:null,index:!1,lang:{allPhotos:"All photos"},counter:!1,exThumbImage:!1,thumbnail:!0,showThumbByDefault:!1,animateThumb:!0,currentPagerPosition:"middle",thumbWidth:100,thumbMargin:5,mobileSrc:!1,mobileSrcMaxWidth:640,swipeThreshold:50,enableTouch:!0,enableDrag:!0,vimeoColor:"CCCCCC",youtubePlayerParams:!1,videoAutoplay:!0,videoMaxWidth:"855px",dynamic:!1,dynamicEl:[],onOpen:function(e){},onSlideBefore:function(e){},onSlideAfter:function(e){},onSlideNext:function(e){},onSlidePrev:function(e){},onBeforeClose:function(e){},onCloseAfter:function(e){}},t),x=function(){h.each(function(){var t=e(this);T.dynamic?(f=T.dynamicEl,d=v=0,q.init(v)):(f=null!==T.selector?e(T.selector):t.children()).on("click",function(i){f=null!==T.selector?e(T.selector):t.children(),i.preventDefault(),i.stopPropagation(),v=f.index(this),d=v,q.init(v)})})},q={init:function(){p=!0,this.structure(),this.getWidth(),this.closeSlide(),this.autoStart(),this.counter(),this.slideTo(),this.buildThumbnail(),this.keyPress(),T.index?(this.slide(T.index),this.animateThumb(T.index)):(this.slide(v),this.animateThumb(v)),T.enableDrag&&this.touch(),T.enableTouch&&this.enableTouch(),setTimeout(function(){i.addClass("opacity")},50)},structure:function(){e("body").append('<div id="lg-outer" class="'+T.addClass+'"><div id="lg-gallery"><div id="lg-slider"></div><a id="lg-close" class="close-button"></a></div></div>').addClass("light-gallery"),a=e("#lg-outer"),i=e("#lg-gallery"),!0===T.showAfterLoad&&i.addClass("show-after-load"),l=i.find("#lg-slider");var t="";if(T.dynamic)for(var n=0;n<T.dynamicEl.length;n++)t+='<div class="lg-slide"></div>';else f.each(function(){t+='<div class="lg-slide"></div>'});l.append(t),s=i.find(".lg-slide")},closeSlide:function(){T.closable&&e("#lg-outer").on("click",function(t){e(t.target).is(".lg-slide")&&m.destroy(!1)}),e("#lg-close").bind("click touchend",function(){m.destroy(!1)})},getWidth:function(){e(window).bind("resize.lightGallery",void(c=e(window).width()))},doCss:function(){return!(!T.useCSS||!function(){for(var e=["transition","MozTransition","WebkitTransition","OTransition","msTransition","KhtmlTransition"],t=document.documentElement,i=0;i<e.length;i++)if(e[i]in t.style)return!0}())},enableTouch:function(){var t=this;if(g){var i={},a={};e("body").on("touchstart.lightGallery",function(e){a=e.originalEvent.targetTouches[0],i.pageX=e.originalEvent.targetTouches[0].pageX,i.pageY=e.originalEvent.targetTouches[0].pageY}),e("body").on("touchmove.lightGallery",function(e){var t=e.originalEvent;a=t.targetTouches[0],e.preventDefault()}),e("body").on("touchend.lightGallery",function(e){var l=a.pageX-i.pageX,s=T.swipeThreshold;l>=s?(t.prevSlide(),clearInterval(u)):l<=-s&&(t.nextSlide(),clearInterval(u))})}},touch:function(){var t,i,a=this;e(".light-gallery").bind("mousedown",function(e){e.stopPropagation(),e.preventDefault(),t=e.pageX}),e(".light-gallery").bind("mouseup",function(e){e.stopPropagation(),e.preventDefault(),(i=e.pageX)-t>20?a.prevSlide():t-i>20&&a.nextSlide()})},isVideo:function(e,t){var i=e.match(/\/\/(?:www\.)?youtu(?:\.be|be\.com)\/(?:watch\?v=|embed\/)?([a-z0-9_\-]+)/i),a=e.match(/\/\/(?:www\.)?vimeo.com\/([0-9a-z\-_]+)/i),l=!1;if(T.dynamic?"true"==T.dynamicEl[t].iframe&&(l=!0):"true"==f.eq(t).attr("data-iframe")&&(l=!0),i||a||l)return!0},loadVideo:function(t,i){var a=t.match(/\/\/(?:www\.)?youtu(?:\.be|be\.com)\/(?:watch\?v=|embed\/)?([a-z0-9_\-]+)/i),l=t.match(/\/\/(?:www\.)?vimeo.com\/([0-9a-z\-_]+)/i),s="",n="";if(a){if(n=!0===T.videoAutoplay&&!1===b?"?autoplay=1&rel=0&wmode=opaque":"?wmode=opaque",T.youtubePlayerParams)n=n+"&"+e.param(T.youtubePlayerParams);s='<iframe class="object" width="560" height="315" src="//www.youtube.com/embed/'+a[1]+n+'" frameborder="0" allowfullscreen></iframe>'}else l?(n=!0===T.videoAutoplay&&!1===b?"autoplay=1&amp;":"",s='<iframe class="object" id="video'+i+'" width="560" height="315"  src="http://player.vimeo.com/video/'+l[1]+"?"+n+"byline=0&amp;portrait=0&amp;color="+T.vimeoColor+'" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'):s='<iframe class="object" frameborder="0" src="'+t+'"  allowfullscreen="true"></iframe>';return'<div class="video-cont" style="max-width:'+T.videoMaxWidth+' !important;"><div class="video">'+s+"</div></div>"},addHtml:function(t){var i=null;if(null!=(i=T.dynamic?T.dynamicEl[t]["sub-html"]:f.eq(t).attr("data-sub-html"))){var a=i.substring(0,1);i="."==a||"#"==a?e(i).html():i,s.eq(t).append(i)}},preload:function(e){for(var t=e,i=0;i<=T.preload&&!(i>=f.length-e);i++)this.loadContent(t+i,!0);for(var a=0;a<=T.preload&&!(t-a<0);a++)this.loadContent(t-a,!0)},loadObj:function(e,t){var i=this;s.eq(t).find(".object").on("load error",function(){s.eq(t).addClass("complete")}),!1===e&&(s.eq(t).hasClass("complete")?i.preload(t):s.eq(t).find(".object").on("load error",function(){i.preload(t)}))},loadContent:function(t,i){var a,l=this;f.length;T.preload>f.length&&(T.preload=f.length),!0===T.mobileSrc&&c<=T.mobileSrcMaxWidth&&(a=T.dynamic?T.dynamicEl[t].mobileSrc:f.eq(t).attr("data-responsive-src")),a||(a=T.dynamic?T.dynamicEl[t].src:f.eq(t).attr("data-src"));var n=0;!0===i&&(n=T.speed+400),void 0!==a&&""!==a?l.isVideo(a,t)?setTimeout(function(){s.eq(t).hasClass("loaded")||(s.eq(t).prepend(l.loadVideo(a,t)),l.addHtml(t),s.eq(t).addClass("loaded"),T.auto&&!0===T.videoAutoplay&&clearInterval(u)),l.loadObj(i,t)},n):setTimeout(function(){s.eq(t).hasClass("loaded")||(s.eq(t).prepend('<img class="object" src="'+a+'" />'),l.addHtml(t),s.eq(t).addClass("loaded")),l.loadObj(i,t)},n):setTimeout(function(){if(!s.eq(t).hasClass("loaded")){var a=null;if(null!=(a=T.dynamic?T.dynamicEl[t].html:f.eq(t).attr("data-html"))){var n=a.substring(0,1);a="."==n||"#"==n?e(a).html():a}null!=a&&s.eq(t).append('<div class="video-cont" style="max-width:'+T.videoMaxWidth+' !important;"><div class="video">'+a+"</div></div>"),l.addHtml(t),s.eq(t).addClass("loaded complete"),T.auto&&!0===T.videoAutoplay&&clearInterval(u)}l.loadObj(i,t)},n)},counter:function(){if(!0===T.counter){var t=e("#lg-slider > div").length;i.append("<div id='lg-counter'><span id='lg-counter-current'></span> / <span id='lg-counter-all'>"+t+"</span></div>")}},buildThumbnail:function(){if(!0===T.thumbnail&&f.length>1){var t=this,a="";T.showThumbByDefault||(a='<span class="close-button ib"><i class="bUi-iCn-rMv-16" aria-hidden="true"></i></span>'),i.append('<div class="thumb-cont"><div class="thumb-info">'+a+'</div><div class="thumb-inner"></div></div>'),i.find(".thumb-cont"),n.after('<a class="cl-thumb"></a>'),n.parent().addClass("has-thumb"),i.find(".cl-thumb").bind("click touchend",function(){i.addClass("open"),t.doCss()&&"slide"===T.mode&&(s.eq(v).prevAll().removeClass("next-slide").addClass("prev-slide"),s.eq(v).nextAll().removeClass("prev-slide").addClass("next-slide"))}),i.find(".thumb-cont .close-button").bind("click touchend",function(){i.removeClass("open")});var l,o=i.find(".thumb-info"),d=i.find(".thumb-inner"),c="";if(T.dynamic)for(var h=0;h<T.dynamicEl.length;h++)l=T.dynamicEl[h].thumb,c+='<div class="thumb"><img src="'+l+'" /></div>';else f.each(function(){l=!1===T.exThumbImage||void 0===e(this).attr(T.exThumbImage)||null===e(this).attr(T.exThumbImage)?e(this).find("img").attr("src"):e(this).attr(T.exThumbImage),c+='<div class="thumb"><img src="'+l+'" /></div>'});if(d.append(c),(r=d.find(".thumb")).css({"margin-right":T.thumbMargin+"px",width:T.thumbWidth+"px"}),!0===T.animateThumb){var m=f.length*(T.thumbWidth+T.thumbMargin);i.find(".thumb-inner").css({width:m+"px",position:"relative","transition-duration":T.speed+"ms"})}r.bind("click touchend",function(){C=!0;var i=e(this).index();r.removeClass("active"),e(this).addClass("active"),t.slide(i),t.animateThumb(i),clearInterval(u)}),o.prepend('<span class="ib count">'+T.lang.allPhotos+" ("+r.length+")</span>"),T.showThumbByDefault&&i.addClass("open")}},animateThumb:function(e){if(!0===T.animateThumb){var t,a=i.find(".thumb-cont").width();switch(T.currentPagerPosition){case"left":t=0;break;case"middle":t=a/2-T.thumbWidth/2;break;case"right":t=a-T.thumbWidth}var l=(T.thumbWidth+T.thumbMargin)*e-1-t,s=f.length*(T.thumbWidth+T.thumbMargin);l>s-a&&(l=s-a),l<0&&(l=0),this.doCss()?i.find(".thumb-inner").css("transform","translate3d(-"+l+"px, 0px, 0px)"):i.find(".thumb-inner").animate({left:-l+"px"},T.speed)}},slideTo:function(){var e=this;!0===T.controls&&f.length>1&&(i.append('<div id="lg-action"><a id="lg-prev"></a><a id="lg-next"></a></div>'),n=i.find("#lg-prev"),o=i.find("#lg-next"),n.bind("click",function(){e.prevSlide(),clearInterval(u)}),o.bind("click",function(){e.nextSlide(),clearInterval(u)}))},autoStart:function(){var e=this;!0===T.auto&&(u=setInterval(function(){v=v+1<f.length?v:-1,v++,e.slide(v)},T.pause))},keyPress:function(){var t=this;e(window).bind("keyup.lightGallery",function(e){e.preventDefault(),e.stopPropagation(),37===e.keyCode&&(t.prevSlide(),clearInterval(u)),38===e.keyCode&&!0===T.thumbnail&&f.length>1?i.hasClass("open")||(t.doCss()&&"slide"===T.mode&&(s.eq(v).prevAll().removeClass("next-slide").addClass("prev-slide"),s.eq(v).nextAll().removeClass("prev-slide").addClass("next-slide")),i.addClass("open")):39===e.keyCode&&(t.nextSlide(),clearInterval(u)),40===e.keyCode&&!0===T.thumbnail&&f.length>1&&!T.showThumbByDefault?i.hasClass("open")&&i.removeClass("open"):!0===T.escKey&&27===e.keyCode&&(!T.showThumbByDefault&&i.hasClass("open")?i.removeClass("open"):m.destroy(!1))})},nextSlide:function(){(v=s.index(s.eq(d)))+1<f.length?(v++,this.slide(v)):T.loop?(v=0,this.slide(v)):!0===T.thumbnail&&f.length>1&&!T.showThumbByDefault?i.addClass("open"):(s.eq(v).find(".object").addClass("right-end"),setTimeout(function(){s.find(".object").removeClass("right-end")},400)),this.animateThumb(v),T.onSlideNext.call(this,m)},prevSlide:function(){(v=s.index(s.eq(d)))>0?(v--,this.slide(v)):T.loop?(v=f.length-1,this.slide(v)):!0===T.thumbnail&&f.length>1&&!T.showThumbByDefault?i.addClass("open"):(s.eq(v).find(".object").addClass("left-end"),setTimeout(function(){s.find(".object").removeClass("left-end")},400)),this.animateThumb(v),T.onSlidePrev.call(this,m)},slide:function(t){var i=this;if(b?(setTimeout(function(){i.loadContent(t,!1)},T.speed+400),l.hasClass("on")||l.addClass("on"),this.doCss()&&""!==T.speed&&(l.hasClass("speed")||l.addClass("speed"),!1===w&&(l.css("transition-duration",T.speed+"ms"),w=!0)),this.doCss()&&""!==T.cssEasing&&(l.hasClass("timing")||l.addClass("timing"),!1===y&&(l.css("transition-timing-function",T.cssEasing),y=!0)),T.onSlideBefore.call(this,m)):i.loadContent(t,!1),"slide"===T.mode){var a=null!==navigator.userAgent.match(/iPad/i);!this.doCss()||l.hasClass("slide")||a?this.doCss()&&!l.hasClass("use-left")&&a&&l.addClass("use-left"):l.addClass("slide"),this.doCss()||b?!this.doCss()&&b&&l.animate({left:100*-t+"%"},T.speed,T.easing):l.css({left:100*-t+"%"})}else"fade"===T.mode&&(this.doCss()&&!l.hasClass("fade-m")?l.addClass("fade-m"):this.doCss()||l.hasClass("animate")||l.addClass("animate"),this.doCss()||b?!this.doCss()&&b&&(s.eq(d).fadeOut(T.speed,T.easing),s.eq(t).fadeIn(T.speed,T.easing)):(s.fadeOut(100),s.eq(t).fadeIn(100)));if(t+1>=f.length&&T.auto&&!1===T.loop&&clearInterval(u),s.eq(d).removeClass("current"),s.eq(t).addClass("current"),this.doCss()&&"slide"===T.mode&&(!1===C?(e(".prev-slide").removeClass("prev-slide"),e(".next-slide").removeClass("next-slide"),s.eq(t-1).addClass("prev-slide"),s.eq(t+1).addClass("next-slide")):(s.eq(t).prevAll().removeClass("next-slide").addClass("prev-slide"),s.eq(t).nextAll().removeClass("prev-slide").addClass("next-slide"))),!0===T.thumbnail&&f.length>1&&(r.removeClass("active"),r.eq(t).addClass("active")),T.controls&&T.hideControlOnEnd&&!1===T.loop&&f.length>1){var c=f.length;c=parseInt(c)-1,0===t?(n.addClass("disabled"),o.removeClass("disabled")):t===c?(n.removeClass("disabled"),o.addClass("disabled")):n.add(o).removeClass("disabled")}d=t,!1===b?T.onOpen.call(this,m):T.onSlideAfter.call(this,m),setTimeout(function(){b=!0}),C=!1,T.counter&&e("#lg-counter-current").text(t+1),e(window).bind("resize.lightGallery",function(){setTimeout(function(){i.animateThumb(t)},200)})}};return m.isActive=function(){return!0===p},m.destroy=function(t){p=!1,t=void 0===t,T.onBeforeClose.call(this,m);var l=b;b=!1,y=!1,w=!1,C=!1,clearInterval(u),!0===t&&f.off("click touch touchstart"),e(".light-gallery").off("mousedown mouseup"),e("body").off("touchstart.lightGallery touchmove.lightGallery touchend.lightGallery"),e(window).off("resize.lightGallery keyup.lightGallery"),!0===l&&(i.addClass("fade-m"),setTimeout(function(){a.remove(),e("body").removeClass("light-gallery")},500)),T.onCloseAfter.call(this,m)},x(),this}}(jQuery);